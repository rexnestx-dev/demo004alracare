<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Klinik Sehat</title>
    <link rel="stylesheet" href="admin-style.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <div class="login-logo">
                    <div class="logo-icon">üè•</div>
                    <h1>Klinik Sehat</h1>
                    <p>Admin Dashboard</p>
                </div>
            </div>
            
            <form id="adminLoginForm" class="login-form">
                <div class="form-group">
                    <label for="adminUsername">Username</label>
                    <input type="text" id="adminUsername" name="adminUsername" required 
                           placeholder="Masukkan username">
                </div>
                
                <div class="form-group">
                    <label for="adminPassword">Password</label>
                    <input type="password" id="adminPassword" name="adminPassword" required 
                           placeholder="Masukkan password">
                </div>
                
                <button type="submit" class="login-btn">
                    üîê Login Admin
                </button>
                
                <div class="login-note">
                    <p>Default login: <strong>admin</strong> / <strong>admin123</strong></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Main Admin Dashboard -->
    <div id="adminDashboard" class="admin-dashboard" style="display: none;">
        <!-- Header -->
        <header class="admin-header">
            <div class="admin-header-content">
                <div class="header-left">
                    <div class="admin-logo">
                        <span class="logo-icon">üè•</span>
                        <span class="logo-text">Klinik Sehat Admin</span>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="admin-info">
                        <span id="adminGreeting">Halo, Admin!</span>
                        <div class="notification-bell" onclick="toggleNotifications()">
                            üîî
                            <span class="notification-count" id="notificationCount">0</span>
                        </div>
                        <button class="logout-btn" onclick="logout()">üö™ Logout</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Notifications Dropdown -->
        <div id="notificationsDropdown" class="notifications-dropdown">
            <div class="notifications-header">
                <h4>Notifications</h4>
                <button class="mark-all-read" onclick="markAllNotificationsAsRead()">Tandai Semua Dibaca</button>
            </div>
            <div class="notifications-list" id="notificationsDropdownList">
                <!-- Notifications will be loaded here -->
            </div>
            <div class="notifications-footer">
                <a href="#" onclick="switchTab('notifications')">Lihat Semua</a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="admin-main">
            <!-- Sidebar -->
            <nav class="admin-sidebar">
                <ul class="sidebar-menu">
                    <li>
                        <a href="#" class="menu-item active" data-tab="dashboard">
                            üìä Dashboard
                        </a>
                    </li>
                    <li>
                        <a href="#" class="menu-item" data-tab="bookings">
                            üìÖ Bookings
                        </a>
                    </li>
                    <li>
                        <a href="#" class="menu-item" data-tab="patients">
                            üë• Pasien
                        </a>
                    </li>
                    <li>
                        <a href="#" class="menu-item" data-tab="calendar">
                            üóìÔ∏è Calendar
                        </a>
                    </li>
                    <li>
                        <a href="#" class="menu-item" data-tab="notifications">
                            üîî Notifications
                            <span class="sidebar-badge" id="sidebarNotificationCount">0</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="menu-item" data-tab="reports">
                            üìà Laporan
                        </a>
                    </li>
                    <li>
                        <a href="#" class="menu-item" data-tab="settings">
                            ‚öôÔ∏è Settings
                        </a>
                    </li>
                </ul>
                
                <div class="sidebar-footer">
                    <a href="public-site.html" class="public-site-link">
                        üåê Kunjungi Website Public
                    </a>
                </div>
            </nav>

            <!-- Content Area -->
            <main class="admin-content">
                <!-- Dashboard Tab -->
                <div id="dashboardTab" class="tab-content active">
                    <div class="content-header">
                        <h1>Dashboard Overview</h1>
                        <p>Ringkasan aktivitas klinik</p>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üìÖ</div>
                            <div class="stat-info">
                                <h3 id="totalBookings">0</h3>
                                <p>Total Bookings</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üë•</div>
                            <div class="stat-info">
                                <h3 id="totalPatients">0</h3>
                                <p>Total Pasien</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">‚è≥</div>
                            <div class="stat-info">
                                <h3 id="pendingBookings">0</h3>
                                <p>Pending</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üí∞</div>
                            <div class="stat-info">
                                <h3 id="revenue">Rp 0</h3>
                                <p>Revenue Bulan Ini</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-content">
                        <div class="content-row">
                            <div class="content-col">
                                <div class="content-card">
                                    <h3>Bookings Terbaru</h3>
                                    <div class="recent-bookings" id="recentBookings">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="content-col">
                                <div class="content-card">
                                    <h3>Statistik Status</h3>
                                    <div class="status-chart" id="statusChart">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="content-row">
                            <div class="content-col">
                                <div class="content-card">
                                    <h3>Appointments Hari Ini</h3>
                                    <div class="today-appointments" id="todayAppointments">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="content-col">
                                <div class="content-card">
                                    <h3>Notifications Terbaru</h3>
                                    <div class="recent-notifications" id="recentNotifications">
                                        <!-- Will be populated by JS -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bookings Tab -->
                <div id="bookingsTab" class="tab-content">
                    <div class="content-header">
                        <h1>Manajemen Bookings</h1>
                        <p>Kelola semua appointment pasien</p>
                    </div>
                    
                    <div class="content-actions">
                        <div class="filters">
                            <select id="statusFilter" onchange="filterBookings()">
                                <option value="">Semua Status</option>
                                <option value="pending">Pending</option>
                                <option value="confirmed">Confirmed</option>
                                <option value="completed">Completed</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                            
                            <input type="date" id="dateFilter" onchange="filterBookings()" 
                                   placeholder="Filter tanggal">
                        </div>
                        
                        <button class="action-btn primary" onclick="exportBookings()">
                            üì• Export Data
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID Booking</th>
                                    <th>Nama Pasien</th>
                                    <th>Layanan</th>
                                    <th>Tanggal</th>
                                    <th>Jam</th>
                                    <th>Status</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="bookingsTable">
                                <!-- Will be populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Patients Tab -->
                <div id="patientsTab" class="tab-content">
                    <div class="content-header">
                        <h1>Data Pasien</h1>
                        <p>Kelola data semua pasien</p>
                    </div>
                    
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID Pasien</th>
                                    <th>Nama</th>
                                    <th>Telepon</th>
                                    <th>Alamat</th>
                                    <th>Total Bookings</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="patientsTable">
                                <!-- Will be populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Calendar Tab -->
                <div id="calendarTab" class="tab-content">
                    <div class="content-header">
                        <h1>Appointment Calendar</h1>
                        <p>Lihat dan kelola jadwal appointments</p>
                    </div>
                    
                    <div class="calendar-controls">
                        <div class="calendar-nav">
                            <button class="action-btn" onclick="changeCalendarMonth(-1)">‚Üê Bulan Sebelumnya</button>
                            <h2 id="currentMonthYear">Januari 2024</h2>
                            <button class="action-btn" onclick="changeCalendarMonth(1)">Bulan Berikutnya ‚Üí</button>
                        </div>
                        <div class="calendar-actions">
                            <button class="action-btn primary" onclick="syncWithGoogleCalendar()">
                                üîÑ Sync Google Calendar
                            </button>
                            <button class="action-btn" onclick="exportCalendar()">
                                üíæ Export Calendar
                            </button>
                        </div>
                    </div>
                    
                    <div class="calendar-view" id="calendarView">
                        <!-- Calendar will be loaded here -->
                    </div>
                    
                    <div class="calendar-events">
                        <h3>Appointments Bulan Ini</h3>
                        <div id="monthEvents">
                            <!-- Month events will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Notifications Tab -->
                <div id="notificationsTab" class="tab-content">
                    <div class="content-header">
                        <h1>Notifications</h1>
                        <div class="header-actions">
                            <button class="action-btn" onclick="markAllNotificationsAsRead()">
                                ‚úÖ Tandai Semua Dibaca
                            </button>
                            <button class="action-btn secondary" onclick="exportNotifications()">
                                üíæ Export Notifications
                            </button>
                            <button class="action-btn warning" onclick="clearAllNotifications()">
                                üóëÔ∏è Hapus Semua
                            </button>
                        </div>
                    </div>
                    
                    <div class="notifications-filters">
                        <select id="notificationTypeFilter" onchange="filterNotifications()">
                            <option value="">Semua Tipe</option>
                            <option value="new_booking">Booking Baru</option>
                            <option value="status_update">Update Status</option>
                            <option value="reminder">Reminder</option>
                            <option value="system">System</option>
                        </select>
                        
                        <select id="notificationStatusFilter" onchange="filterNotifications()">
                            <option value="">Semua Status</option>
                            <option value="unread">Belum Dibaca</option>
                            <option value="read">Sudah Dibaca</option>
                        </select>
                    </div>
                    
                    <div class="notifications-list" id="notificationsList">
                        <!-- Notifications will be loaded here -->
                    </div>
                </div>

                <!-- Reports Tab -->
                <div id="reportsTab" class="tab-content">
                    <div class="content-header">
                        <h1>Laporan & Analytics</h1>
                        <p>Analisis data klinik</p>
                    </div>
                    
                    <div class="reports-content">
                        <div class="report-filters">
                            <select id="reportPeriod" onchange="generateReport()">
                                <option value="week">Minggu Ini</option>
                                <option value="month">Bulan Ini</option>
                                <option value="quarter">Kuartal Ini</option>
                                <option value="year">Tahun Ini</option>
                            </select>
                            
                            <input type="month" id="reportMonth" onchange="generateReport()">
                        </div>
                        
                        <div class="report-cards">
                            <div class="report-card">
                                <h3>Ringkasan Bookings</h3>
                                <div id="bookingsSummary">
                                    <!-- Will be populated by JS -->
                                </div>
                            </div>
                            
                            <div class="report-card">
                                <h3>Layanan Populer</h3>
                                <div id="popularServices">
                                    <!-- Will be populated by JS -->
                                </div>
                            </div>
                        </div>

                        <div class="report-cards">
                            <div class="report-card">
                                <h3>Statistik Notifications</h3>
                                <div id="notificationsStats">
                                    <!-- Will be populated by JS -->
                                </div>
                            </div>
                            
                            <div class="report-card">
                                <h3>Calendar Overview</h3>
                                <div id="calendarStats">
                                    <!-- Will be populated by JS -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="settingsTab" class="tab-content">
                    <div class="content-header">
                        <h1>Pengaturan Sistem</h1>
                        <p>Konfigurasi aplikasi</p>
                    </div>
                    
                    <div class="settings-content">
                        <div class="setting-section">
                            <h3>Data Management</h3>
                            <div class="setting-actions">
                                <button class="action-btn" onclick="exportAllData()">
                                    üíæ Backup All Data
                                </button>
                                <button class="action-btn secondary" onclick="showImportDialog()">
                                    üì§ Restore Data
                                </button>
                                <button class="action-btn warning" onclick="showCleanupDialog()">
                                    üóëÔ∏è Cleanup Data
                                </button>
                            </div>
                        </div>
                        
                        <div class="setting-section">
                            <h3>Notification Settings</h3>
                            <form id="notificationSettingsForm">
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="browserNotifications" checked>
                                        Browser Notifications
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="autoReminders" checked>
                                        Auto Appointment Reminders
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label for="reminderTime">Reminder Time (jam sebelum appointment)</label>
                                    <select id="reminderTime">
                                        <option value="1">1 Jam</option>
                                        <option value="24" selected>24 Jam</option>
                                        <option value="48">48 Jam</option>
                                    </select>
                                </div>
                                <button type="submit" class="action-btn primary">
                                    üíæ Simpan Pengaturan
                                </button>
                            </form>
                        </div>

                        <div class="setting-section">
                            <h3>Calendar Settings</h3>
                            <form id="calendarSettingsForm">
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="autoCreateEvents" checked>
                                        Auto Create Calendar Events
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label for="workingHoursStart">Jam Mulai Praktik</label>
                                    <input type="time" id="workingHoursStart" value="08:00">
                                </div>
                                <div class="form-group">
                                    <label for="workingHoursEnd">Jam Selesai Praktik</label>
                                    <input type="time" id="workingHoursEnd" value="17:00">
                                </div>
                                <button type="submit" class="action-btn primary">
                                    üíæ Simpan Pengaturan
                                </button>
                            </form>
                        </div>
                        
                        <div class="setting-section">
                            <h3>Informasi Klinik</h3>
                            <form id="clinicSettingsForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="clinicName">Nama Klinik</label>
                                        <input type="text" id="clinicName" value="Klinik Sehat">
                                    </div>
                                    <div class="form-group">
                                        <label for="clinicPhone">Telepon</label>
                                        <input type="text" id="clinicPhone" value="0812-3456-7890">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="clinicAddress">Alamat</label>
                                    <textarea id="clinicAddress">Jl. Kesehatan No. 123, Jakarta</textarea>
                                </div>
                                
                                <button type="submit" class="action-btn primary">
                                    üíæ Simpan Pengaturan
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal for Booking Details -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('bookingModal')">&times;</span>
            <div id="bookingModalContent"></div>
        </div>
    </div>

    <!-- Modal for Patient Details -->
    <div id="patientModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('patientModal')">&times;</span>
            <div id="patientModalContent"></div>
        </div>
    </div>

    <!-- Modal for Event Details -->
    <div id="eventModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('eventModal')">&times;</span>
            <div id="eventModalContent"></div>
        </div>
    </div>

    <!-- Import Data Modal -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('importModal')">&times;</span>
            <h2>Import Data</h2>
            <input type="file" id="importFile" accept=".json">
            <div class="modal-actions">
                <button class="action-btn" onclick="importData()">Import</button>
                <button class="action-btn secondary" onclick="closeModal('importModal')">Batal</button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        <span id="notificationText"></span>
    </div>

    <script src="data-manager.js"></script>
    <script src="notification-manager.js"></script>
    <script src="calendar-manager.js"></script>
    <script src="admin-script.js"></script>
</body>
</html>